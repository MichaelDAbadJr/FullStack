import{r as x,A as v,u as f,j as e,R as I,a as g}from"./index-CeC7V2yR.js";import{u as j,I as r,V as i,a as E}from"./form-hook-CTeF-nu7.js";import{u as V,E as A,B as T}from"./http-hook-sUJLLvpC.js";import{I as h}from"./ImageUpload-BQ_eeKOH.js";/* empty css                  */const L=()=>{const n=x.useContext(v),{isLoading:l,error:o,sendRequest:p,clearError:d}=V(),[t,s]=j({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},image:{value:null,isValid:!1}},!1),u=f(),c=async m=>{m.preventDefault();try{const a=new FormData;a.append("title",t.inputs.title.value),a.append("description",t.inputs.description.value),a.append("address",t.inputs.address.value),a.append("image",t.inputs.image.value),await p("https://mern-picture-app.uc.r.appspot.com/api/places","POST",a,{Authorization:"Bearer "+n.token}),u("/")}catch{}};return e.jsxs(I.Fragment,{children:[e.jsx(A,{error:o,onClear:d}),e.jsxs("form",{className:"place-form",onSubmit:c,children:[l&&e.jsx(g,{asOverlay:!0}),e.jsx(r,{id:"title",element:"input",type:"text",label:"Title",validators:[i()],errorText:"Please Enter a Valid Title",onInput:s}),e.jsx(r,{id:"description",element:"textarea",label:"Description",validators:[E(5)],errorText:"Please Enter a Valid Description (at least 5 characters).",onInput:s}),e.jsx(r,{id:"address",element:"input",label:"Address",validators:[i()],errorText:"Please Enter a Valid Address.",onInput:s}),e.jsx(h,{id:"image",onInput:s,errorText:"Please provide an image."}),e.jsx(T,{type:"submit",disabled:!t.isValid,children:"Add a Place"})]})]})};export{L as default};
