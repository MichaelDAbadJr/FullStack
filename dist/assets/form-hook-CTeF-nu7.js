import{r as u,j as a}from"./index-CeC7V2yR.js";const o="REQUIRE",A="MINLENGTH",V="MAXLENGTH",f="MIN",p="MAX",T="EMAIL",_=()=>({type:o}),y=e=>({type:A,val:e}),L=()=>({type:T}),h=(e,t)=>{let i=!0;for(const s of t)s.type===o&&(i=i&&e.trim().length>0),s.type===A&&(i=i&&e.trim().length>=s.val),s.type===V&&(i=i&&e.trim().length<=s.val),s.type===f&&(i=i&&+e>=s.val),s.type===p&&(i=i&&+e<=s.val),s.type===T&&(i=i&&/^\S+@\S+\.\S+$/.test(e));return i},v=(e,t)=>{switch(t.type){case"CHANGE":return{...e,value:t.val,isValid:h(t.val,t.validators)};case"TOUCH":return{...e,isTouched:!0};default:return e}},N=e=>{const[t,i]=u.useReducer(v,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),{id:s,onInput:r}=e,{value:d,isValid:l}=t;u.useEffect(()=>{r(s,d,l)},[s,d,l,r]);const n=E=>{i({type:"CHANGE",val:E.target.value,validators:e.validators})},c=()=>{i({type:"TOUCH"})},I=e.element==="input"?a.jsx("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:n,onBlur:c,value:t.value}):a.jsx("textarea",{id:e.id,rows:e.rows||3,onChange:n,onBlur:c,value:t.value});return a.jsxs("div",{className:`form-control ${!t.isValid&&t.isTouched&&"form-control--invalid"}`,children:[a.jsx("label",{htmlFor:e.id,children:e.label}),I,!t.isValid&&t.isTouched&&a.jsx("p",{children:e.errorText})]})},R=(e,t)=>{switch(t.type){case"INPUT_CHANGE":let i=!0;for(const s in e.inputs)e.inputs[s]&&(s===t.inputId?i=i&&t.isValid:i=i&&e.inputs[s].isValid);return{...e,inputs:{...e.inputs,[t.inputId]:{value:t.value,isValid:t.isValid}},isValid:i};case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},H=(e,t)=>{const[i,s]=u.useReducer(R,{inputs:e,isValid:t}),r=u.useCallback((l,n,c)=>{s({type:"INPUT_CHANGE",value:n,isValid:c,inputId:l})},[]),d=u.useCallback((l,n)=>{s({type:"SET_DATA",inputs:l,formIsValid:n})},[]);return[i,r,d]};export{N as I,_ as V,y as a,L as b,H as u};
